import{d as u}from"./chunk-3VWV52XJ.js";import{Cb as l,Db as f,E as n,L as h,O as a,i as r,j as p}from"./chunk-S2PF2REC.js";var v=(()=>{let e=class e{constructor(t,o){this.http=t,this.db=o,this.db.object("configuration/facebook").valueChanges().subscribe(s=>{this.apiVersion=s.apiVersion,this.pixels=Object.values(s.pixels)})}sendEvent(t){let o=new l({"Content-Type":"application/json"});return r(this.pixels).pipe(n(s=>{let c=`https://graph.facebook.com/${this.apiVersion}/${s.id}/events?access_token=${s.token}`;return console.log("FbPixelUrl:",c),this.http.post(c,t,{headers:o})}))}testSendEvent(){r(this.pixels).pipe(n(t=>{let o=`https://graph.facebook.com/${this.apiVersion}/${t.id}/events?access_token=${t.token}`;return p(o)})).subscribe({next:t=>{console.log("URL in subscription:",t)},error:t=>console.error("Error:",t)})}};e.\u0275fac=function(o){return new(o||e)(a(f),a(u))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();export{v as a};
