import{d as b}from"./chunk-3VWV52XJ.js";import{Cb as u,Db as m,E as l,L as f,O as i,i as c,j as p,l as h}from"./chunk-S2PF2REC.js";var $=(()=>{let e=class e{constructor(t,o){this.http=t,this.db=o,this.db.object("configuration/facebook").valueChanges().subscribe(s=>{this.apiVersion=s.apiVersion,this.pixels=Object.values(s.pixels)})}sendEvent(t){let o=new u({"Content-Type":"application/json"}),s=this.pixels.map(n=>{let a=`https://graph.facebook.com/${this.apiVersion}/${n.id}/events?access_token=${n.token}`;return console.log("FbPixelUrl:",a),this.http.post(a,t,{headers:o})});return h(s)}testSendEvent(){c(this.pixels).pipe(l(t=>{let o=`https://graph.facebook.com/${this.apiVersion}/${t.id}/events?access_token=${t.token}`;return p(o)})).subscribe({next:t=>{console.log("URL in subscription:",t)},error:t=>console.error("Error:",t)})}};e.\u0275fac=function(o){return new(o||e)(i(m),i(b))},e.\u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();export{$ as a};
